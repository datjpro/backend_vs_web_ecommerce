{"ast":null,"code":"var _jsxFileName = \"D:\\\\Ecommerce\\\\frontend\\\\src\\\\components\\\\Profile\\\\CustomerProfile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAppContext } from '../../context/AppContext';\nimport './customerprofile.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CustomerProfile = () => {\n  _s();\n  const {\n    customer,\n    customerProfile,\n    setCustomerProfile\n  } = useAppContext();\n  const [formData, setFormData] = useState(customerProfile);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    setFormData(customerProfile);\n  }, [customerProfile]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        alert('You must be logged in to update your profile.');\n        setLoading(false);\n        return;\n      }\n      console.log(\"Data to send:\", formData); // Log the data being sent\n      const response = await axios.put('http://localhost:3002/api/customer/profile', formData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(\"Response from server:\", response); // Log the entire response\n      alert(response.data.message);\n      setCustomerProfile(formData);\n    } catch (error) {\n      console.error(\"Error details:\", error); // Log the entire error object\n      let errorMessage = 'An unexpected error occurred.';\n      if (error.response) {\n        var _error$response$data;\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        errorMessage = `Error: ${error.response.status} - ${((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'No detailed message'}`;\n      } else if (error.request) {\n        // The request was made but no response was received\n        errorMessage = 'Error: No response from the server.';\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        errorMessage = `Error: ${error.message}`;\n      }\n      alert(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"customer-profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Th\\xF4ng Tin Kh\\xE1ch H\\xE0ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0110i\\u1EC7n Tho\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"phone\",\n          value: formData.phone,\n          onChange: handleChange,\n          required: true,\n          className: \"input-phone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Sinh Nh\\u1EADt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"birthday\",\n          value: formData.birthday,\n          onChange: handleChange,\n          required: true,\n          className: \"input-date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Gi\\u1EDBi t\\xEDnh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"gender\",\n          value: formData.gender,\n          onChange: handleChange,\n          required: true,\n          className: \"input-gender\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select Gender\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"male\",\n            children: \"Male\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"female\",\n            children: \"Female\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"other\",\n            children: \"Other\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Th\\xE0nh ph\\u1ED1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"city\",\n          value: formData.city,\n          onChange: handleChange,\n          required: true,\n          className: \"input-city\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0110\\u1ECBa ch\\u1EC9 chi ti\\u1EBFt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"describe\",\n          value: formData.describe,\n          onChange: handleChange,\n          required: true,\n          className: \"input-describe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"updateProfile\",\n        children: loading ? 'Updating...' : 'Update Profile'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(CustomerProfile, \"4WLHemUP6ivh7pYYgw4IA8pDxEM=\", false, function () {\n  return [useAppContext];\n});\n_c = CustomerProfile;\nvar _c;\n$RefreshReg$(_c, \"CustomerProfile\");","map":{"version":3,"names":["React","useState","useEffect","useAppContext","axios","CustomerProfile","customer","customerProfile","setCustomerProfile","formData","setFormData","loading","setLoading","handleChange","e","name","value","target","prevData","handleSubmit","preventDefault","token","localStorage","getItem","alert","console","log","response","put","headers","Authorization","data","message","error","errorMessage","status","request","phone","birthday","gender","city","describe"],"sources":["D:/Ecommerce/frontend/src/components/Profile/CustomerProfile.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAppContext } from '../../context/AppContext';\r\nimport './customerprofile.css';\r\nimport axios from 'axios';\r\n\r\nexport const CustomerProfile = () => {\r\n    const { customer, customerProfile, setCustomerProfile } = useAppContext();\r\n    const [formData, setFormData] = useState(customerProfile);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        setFormData(customerProfile);\r\n    }, [customerProfile]);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prevData) => ({\r\n            ...prevData,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) {\r\n                alert('You must be logged in to update your profile.');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n            console.log(\"Data to send:\", formData); // Log the data being sent\r\n            const response = await axios.put('http://localhost:3002/api/customer/profile', formData, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n\r\n            console.log(\"Response from server:\", response); // Log the entire response\r\n            alert(response.data.message);\r\n            setCustomerProfile(formData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error details:\", error); // Log the entire error object\r\n            let errorMessage = 'An unexpected error occurred.';\r\n            if (error.response) {\r\n                // The request was made and the server responded with a status code\r\n                // that falls out of the range of 2xx\r\n                errorMessage = `Error: ${error.response.status} - ${error.response.data?.message || 'No detailed message'}`;\r\n            } else if (error.request) {\r\n                // The request was made but no response was received\r\n                errorMessage = 'Error: No response from the server.';\r\n            } else {\r\n                // Something happened in setting up the request that triggered an Error\r\n                errorMessage = `Error: ${error.message}`;\r\n            }\r\n            alert(errorMessage);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"customer-profile\">\r\n            <h2>Thông Tin Khách Hàng</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label>Điện Thoại</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"phone\"\r\n                        value={formData.phone}\r\n                        onChange={handleChange}\r\n                        required\r\n                        className=\"input-phone\"\r\n                    />\r\n\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Sinh Nhật</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        name=\"birthday\"\r\n                        value={formData.birthday}\r\n                        onChange={handleChange}\r\n                        required\r\n                        className=\"input-date\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Giới tính</label>\r\n                    <select\r\n                        name=\"gender\"\r\n                        value={formData.gender}\r\n                        onChange={handleChange}\r\n                        required\r\n                        className=\"input-gender\"\r\n                    >\r\n                        <option value=\"\">Select Gender</option>\r\n                        <option value=\"male\">Male</option>\r\n                        <option value=\"female\">Female</option>\r\n                        <option value=\"other\">Other</option>\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Thành phố</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"city\"\r\n                        value={formData.city}\r\n                        onChange={handleChange}\r\n                        required\r\n                        className=\"input-city\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Địa chỉ chi tiết</label>\r\n                    <textarea\r\n                        name=\"describe\"\r\n                        value={formData.describe}\r\n                        onChange={handleChange}\r\n                        required\r\n                        className=\"input-describe\"\r\n                    />\r\n                </div>\r\n\r\n                <button type=\"submit\" disabled={loading} className='updateProfile'>\r\n                    {loading ? 'Updating...' : 'Update Profile'}\r\n                </button>\r\n            </form>\r\n\r\n\r\n        </div>\r\n    );\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}