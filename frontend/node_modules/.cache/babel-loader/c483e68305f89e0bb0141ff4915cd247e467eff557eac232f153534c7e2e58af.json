{"ast":null,"code":"var _jsxFileName = \"D:\\\\Ecommerce\\\\frontend\\\\src\\\\components\\\\Order\\\\OrderSeller.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useAppContext } from '../../context/AppContext';\nimport axios from 'axios';\nimport './orderseller.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const OrderSeller = () => {\n  _s();\n  const {\n    seller\n  } = useAppContext();\n  const [ordersData, setOrdersData] = useState([]);\n  useEffect(() => {\n    const fetchOrdersForSeller = async () => {\n      try {\n        if (!(seller !== null && seller !== void 0 && seller._id)) return;\n\n        // 1. Lấy sản phẩm theo sellerId\n        const productRes = await axios.get(`http://localhost:4003/api/product/by-seller/${seller._id}`);\n        const sellerProducts = productRes.data.products || [];\n        const orders = [];\n\n        // 2. Với mỗi sản phẩm, lấy orderDetails\n        for (const product of sellerProducts) {\n          const orderDetailsRes = await axios.get(`http://localhost:4001/api/orderDetails/by-product/${product._id}`);\n          const orderDetailsList = orderDetailsRes.data || [];\n          for (const detail of orderDetailsList) {\n            var _order$shippingInfo, _order$shippingInfo2, _order$shippingInfo3;\n            // 3. Lấy thông tin order\n            const orderRes = await axios.get(`http://localhost:4000/api/order/${detail.orderId}`);\n            const order = orderRes.data.order;\n            orders.push({\n              orderId: order._id,\n              productName: product.name,\n              productImage: product.image[0],\n              quantity: detail.quantity,\n              totalPrice: detail.totalPrice,\n              customerName: order === null || order === void 0 ? void 0 : (_order$shippingInfo = order.shippingInfo) === null || _order$shippingInfo === void 0 ? void 0 : _order$shippingInfo.name,\n              address: `${order === null || order === void 0 ? void 0 : (_order$shippingInfo2 = order.shippingInfo) === null || _order$shippingInfo2 === void 0 ? void 0 : _order$shippingInfo2.address}, ${order === null || order === void 0 ? void 0 : (_order$shippingInfo3 = order.shippingInfo) === null || _order$shippingInfo3 === void 0 ? void 0 : _order$shippingInfo3.province}`,\n              status: order.status\n            });\n          }\n        }\n        setOrdersData(orders);\n      } catch (error) {\n        console.error('Lỗi khi tải đơn hàng của seller:', error.message);\n      }\n    };\n    fetchOrdersForSeller();\n  }, [seller]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"seller-orders-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u0110\\u01A1n h\\xE0ng c\\u1EE7a b\\u1EA1n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), ordersData.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Ch\\u01B0a c\\xF3 \\u0111\\u01A1n h\\xE0ng n\\xE0o.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : ordersData.map((order, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seller-order-item\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: order.productImage,\n        alt: order.productName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"S\\u1EA3n ph\\u1EA9m:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 18\n          }, this), \" \", order.productName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"S\\u1ED1 l\\u01B0\\u1EE3ng:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 18\n          }, this), \" \", order.quantity]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"T\\u1ED5ng gi\\xE1:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 18\n          }, this), \" \", order.totalPrice.toLocaleString(), \" \\u0111\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Kh\\xE1ch h\\xE0ng:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 18\n          }, this), \" \", order.customerName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0110\\u1ECBa ch\\u1EC9:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 18\n          }, this), \" \", order.address]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Tr\\u1EA1ng th\\xE1i:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 18\n          }, this), \" \", order.status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderSeller, \"h4FLo11JvdmWxDHLEE6MtbBa+aY=\", false, function () {\n  return [useAppContext];\n});\n_c = OrderSeller;\nvar _c;\n$RefreshReg$(_c, \"OrderSeller\");","map":{"version":3,"names":["React","useEffect","useState","useAppContext","axios","OrderSeller","seller","ordersData","setOrdersData","fetchOrdersForSeller","_id","productRes","get","sellerProducts","data","products","orders","product","orderDetailsRes","orderDetailsList","detail","orderRes","orderId","order","push","productName","name","productImage","image","quantity","totalPrice","customerName","shippingInfo","address","province","status","error","console","message","length","map","index","toLocaleString"],"sources":["D:/Ecommerce/frontend/src/components/Order/OrderSeller.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useAppContext } from '../../context/AppContext';\r\nimport axios from 'axios';\r\nimport './orderseller.css';\r\n\r\nexport const OrderSeller = () => {\r\n  const { seller } = useAppContext();\r\n  const [ordersData, setOrdersData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchOrdersForSeller = async () => {\r\n      try {\r\n        if (!seller?._id) return;\r\n\r\n        // 1. Lấy sản phẩm theo sellerId\r\n        const productRes = await axios.get(`http://localhost:4003/api/product/by-seller/${seller._id}`);\r\n        const sellerProducts = productRes.data.products || [];\r\n\r\n        const orders = [];\r\n\r\n        // 2. Với mỗi sản phẩm, lấy orderDetails\r\n        for (const product of sellerProducts) {\r\n          const orderDetailsRes = await axios.get(`http://localhost:4001/api/orderDetails/by-product/${product._id}`);\r\n          const orderDetailsList = orderDetailsRes.data || [];\r\n\r\n          for (const detail of orderDetailsList) {\r\n            // 3. Lấy thông tin order\r\n            const orderRes = await axios.get(`http://localhost:4000/api/order/${detail.orderId}`);\r\n            const order = orderRes.data.order;\r\n\r\n            orders.push({\r\n              orderId: order._id,\r\n              productName: product.name,\r\n              productImage: product.image[0],\r\n              quantity: detail.quantity,\r\n              totalPrice: detail.totalPrice,\r\n              customerName: order?.shippingInfo?.name,\r\n              address: `${order?.shippingInfo?.address}, ${order?.shippingInfo?.province}`,\r\n              status: order.status,\r\n            });\r\n          }\r\n        }\r\n\r\n        setOrdersData(orders);\r\n      } catch (error) {\r\n        console.error('Lỗi khi tải đơn hàng của seller:', error.message);\r\n      }\r\n    };\r\n\r\n    fetchOrdersForSeller();\r\n  }, [seller]);\r\n\r\n  return (\r\n    <div className=\"seller-orders-container\">\r\n      <h2>Đơn hàng của bạn</h2>\r\n      {ordersData.length === 0 ? (\r\n        <p>Chưa có đơn hàng nào.</p>\r\n      ) : (\r\n        ordersData.map((order, index) => (\r\n          <div className=\"seller-order-item\" key={index}>\r\n            <img src={order.productImage} alt={order.productName} />\r\n            <div>\r\n              <p><strong>Sản phẩm:</strong> {order.productName}</p>\r\n              <p><strong>Số lượng:</strong> {order.quantity}</p>\r\n              <p><strong>Tổng giá:</strong> {order.totalPrice.toLocaleString()} đ</p>\r\n              <p><strong>Khách hàng:</strong> {order.customerName}</p>\r\n              <p><strong>Địa chỉ:</strong> {order.address}</p>\r\n              <p><strong>Trạng thái:</strong> {order.status}</p>\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}