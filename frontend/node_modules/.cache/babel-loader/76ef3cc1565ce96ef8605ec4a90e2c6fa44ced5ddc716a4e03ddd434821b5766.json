{"ast":null,"code":"// import React, { useState } from 'react';\n// import './addProducts.css';\n// import axios from 'axios';\n// import { useAppContext } from '../../context/AppContext';\n// import { useNavigate } from 'react-router-dom';\n\n// export const AddProducts = () => {\n//     const { categories, seller, user, token } = useAppContext();\n//     const navigate = useNavigate();\n\n//     const [productData, setProductData] = useState({\n//         name: '',\n//         description: '',\n//         category: '',\n//         status: '',\n//         price: 0,\n//         quantity: 0\n//     });\n\n//     const [images, setImages] = useState([]);\n\n//     const handleInputChange = (e) => {\n//         setProductData({ ...productData, [e.target.id]: e.target.value });\n//     };\n\n//     const handleImageChange = (e, index) => {\n//         const files = [...images];\n//         files[index] = e.target.files[0];\n//         setImages(files);\n//     };\n//     const handleSubmit = async (e) => {\n//         e.preventDefault();\n\n//         // Kiểm tra đăng nhập và quyền\n//         if (!seller || !token) {\n//             alert('Vui lòng đăng nhập trước khi thêm sản phẩm');\n//             return;\n//         }\n\n//         const userId = user._id;\n//         const sellerId = seller._id;\n\n//         // Kiểm tra hình ảnh đã được chọn\n//         if (images.length === 0) {\n//             alert('Vui lòng chọn ít nhất một hình ảnh');\n//             return;\n//         }\n\n//         // Log dữ liệu trước khi gửi\n//         console.log('Dữ liệu sản phẩm:', productData);\n//         console.log('Danh sách hình ảnh:', images);\n\n//         try {\n//             const formData = new FormData();\n//             formData.append('name', productData.name);\n//             formData.append('describe', productData.description);\n//             formData.append('categoryId', productData.category);\n//             formData.append('status', productData.status);\n//             formData.append('price', productData.price);\n//             formData.append('quantity', productData.quantity);\n//             formData.append('userId', userId);\n//             formData.append('sellerId', sellerId);\n\n//             // Thêm hình ảnh vào formData\n//             images.forEach((image) => {\n//                 if (image) formData.append('image', image);\n//             });\n\n//             // Gửi yêu cầu POST\n//             const res = await axios.post('http://localhost:4003/api/product/create', formData, {\n//                 headers: {\n//                     'Content-Type': 'multipart/form-data',\n//                     Authorization: `Bearer ${token}`\n//                 }\n//             });\n\n//             alert('Sản phẩm đã được thêm thành công!');\n//             console.log(res.data);\n//         } catch (error) {\n//             console.error('Lỗi khi thêm sản phẩm:', error);\n//             if (error.response) {\n//                 console.error('Lỗi từ backend:', error.response.data);\n//                 alert(`Thêm sản phẩm thất bại. Lỗi: ${error.response.data.message || error.response.statusText}`);\n//             } else if (error.request) {\n//                 console.error('Không nhận được phản hồi từ server:', error.request);\n//                 alert('Lỗi kết nối đến server. Vui lòng thử lại sau.');\n//             } else {\n//                 console.error('Lỗi khi gửi yêu cầu:', error.message);\n//                 alert('Đã xảy ra lỗi khi thêm sản phẩm. Vui lòng thử lại.');\n//             }\n//         }\n//     };\n\n//     return (\n//         <div className=\"product-form\">\n//             <form className=\"form-container\" onSubmit={handleSubmit}>\n//                 {/* Upload hình ảnh */}\n//                 <div className=\"form-group\">\n//                     <label className=\"form-label\">Hình ảnh sản phẩm</label>\n//                     <div className=\"image-upload-group\">\n//                         {Array(1).fill('').map((_, index) => (\n//                             <label key={index} htmlFor={`image${index}`}>\n//                                 <input\n//                                     accept=\"image/*\"\n//                                     type=\"file\"\n//                                     id={`image${index}`}\n//                                     name=\"images\"\n//                                     hidden\n//                                     onChange={(e) => handleImageChange(e, index)}\n//                                 />\n//                                 <img\n//                                     className=\"upload-preview\"\n//                                     src={\n//                                         images[index]\n//                                             ? URL.createObjectURL(images[index])\n//                                             : \"https://raw.githubusercontent.com/prebuiltui/prebuiltui/main/assets/e-commerce/uploadArea.png\"\n//                                     }\n//                                     alt=\"upload\"\n//                                 />\n//                             </label>\n//                         ))}\n//                     </div>\n//                 </div>\n\n//                 {/* Tên sản phẩm */}\n//                 <div className=\"form-group\">\n//                     <label htmlFor=\"name\" className=\"form-label\">Tên sản phẩm</label>\n//                     <input id=\"name\" type=\"text\" className=\"form-input\" placeholder=\"Nhập vào đây\" required onChange={handleInputChange} />\n//                 </div>\n\n//                 {/* Mô tả */}\n//                 <div className=\"form-group\">\n//                     <label htmlFor=\"description\" className=\"form-label\">Mô tả sản phẩm</label>\n//                     <textarea id=\"description\" className=\"form-input\" rows=\"4\" placeholder=\"Nhập vào đây\" onChange={handleInputChange}></textarea>\n//                 </div>\n\n//                 {/* Danh mục và trạng thái */}\n//                 <div className=\"form-group\">\n//                     <label htmlFor=\"category\" className=\"form-label\">Danh mục</label>\n//                     <select id=\"category\" className=\"form-input\" onChange={handleInputChange}>\n//                         <option value=\"\">Chọn danh mục</option>\n//                         {categories.map(cat => (\n//                             <option key={cat._id} value={cat._id}>{cat.name}</option>\n//                         ))}\n//                     </select>\n\n//                     <label htmlFor=\"status\" className=\"form-label\">Trạng thái</label>\n//                     <select id=\"status\" className=\"form-input\" onChange={handleInputChange}>\n//                         <option value=\"in_stock\">Còn hàng</option>\n//                         <option value=\"out_of_stock\">Hết hàng</option>\n//                     </select>\n//                 </div>\n\n//                 {/* Giá và số lượng */}\n//                 <div className=\"form-row\">\n//                     <div className=\"form-group small\">\n//                         <label htmlFor=\"price\" className=\"form-label\">Giá sản phẩm</label>\n//                         <input id=\"price\" type=\"number\" className=\"form-input\" placeholder=\"0\" required onChange={handleInputChange} />\n//                     </div>\n//                     <div className=\"form-group small\">\n//                         <label htmlFor=\"quantity\" className=\"form-label\">Số lượng</label>\n//                         <input id=\"quantity\" type=\"number\" className=\"form-input\" placeholder=\"0\" required onChange={handleInputChange} />\n//                     </div>\n//                 </div>\n\n//                 <button type=\"submit\" className=\"submit-btn\">ADD</button>\n\n//             </form>\n//         </div>\n//     );\n// };","map":{"version":3,"names":[],"sources":["D:/Ecommerce/frontend/src/components/Seller/AddProducts.jsx"],"sourcesContent":["// import React, { useState } from 'react';\r\n// import './addProducts.css';\r\n// import axios from 'axios';\r\n// import { useAppContext } from '../../context/AppContext';\r\n// import { useNavigate } from 'react-router-dom';\r\n\r\n// export const AddProducts = () => {\r\n//     const { categories, seller, user, token } = useAppContext();\r\n//     const navigate = useNavigate();\r\n\r\n//     const [productData, setProductData] = useState({\r\n//         name: '',\r\n//         description: '',\r\n//         category: '',\r\n//         status: '',\r\n//         price: 0,\r\n//         quantity: 0\r\n//     });\r\n\r\n//     const [images, setImages] = useState([]);\r\n\r\n//     const handleInputChange = (e) => {\r\n//         setProductData({ ...productData, [e.target.id]: e.target.value });\r\n//     };\r\n\r\n//     const handleImageChange = (e, index) => {\r\n//         const files = [...images];\r\n//         files[index] = e.target.files[0];\r\n//         setImages(files);\r\n//     };\r\n//     const handleSubmit = async (e) => {\r\n//         e.preventDefault();\r\n\r\n//         // Kiểm tra đăng nhập và quyền\r\n//         if (!seller || !token) {\r\n//             alert('Vui lòng đăng nhập trước khi thêm sản phẩm');\r\n//             return;\r\n//         }\r\n\r\n//         const userId = user._id;\r\n//         const sellerId = seller._id;\r\n\r\n//         // Kiểm tra hình ảnh đã được chọn\r\n//         if (images.length === 0) {\r\n//             alert('Vui lòng chọn ít nhất một hình ảnh');\r\n//             return;\r\n//         }\r\n\r\n//         // Log dữ liệu trước khi gửi\r\n//         console.log('Dữ liệu sản phẩm:', productData);\r\n//         console.log('Danh sách hình ảnh:', images);\r\n\r\n//         try {\r\n//             const formData = new FormData();\r\n//             formData.append('name', productData.name);\r\n//             formData.append('describe', productData.description);\r\n//             formData.append('categoryId', productData.category);\r\n//             formData.append('status', productData.status);\r\n//             formData.append('price', productData.price);\r\n//             formData.append('quantity', productData.quantity);\r\n//             formData.append('userId', userId);\r\n//             formData.append('sellerId', sellerId);\r\n\r\n//             // Thêm hình ảnh vào formData\r\n//             images.forEach((image) => {\r\n//                 if (image) formData.append('image', image);\r\n//             });\r\n\r\n//             // Gửi yêu cầu POST\r\n//             const res = await axios.post('http://localhost:4003/api/product/create', formData, {\r\n//                 headers: {\r\n//                     'Content-Type': 'multipart/form-data',\r\n//                     Authorization: `Bearer ${token}`\r\n//                 }\r\n//             });\r\n\r\n//             alert('Sản phẩm đã được thêm thành công!');\r\n//             console.log(res.data);\r\n//         } catch (error) {\r\n//             console.error('Lỗi khi thêm sản phẩm:', error);\r\n//             if (error.response) {\r\n//                 console.error('Lỗi từ backend:', error.response.data);\r\n//                 alert(`Thêm sản phẩm thất bại. Lỗi: ${error.response.data.message || error.response.statusText}`);\r\n//             } else if (error.request) {\r\n//                 console.error('Không nhận được phản hồi từ server:', error.request);\r\n//                 alert('Lỗi kết nối đến server. Vui lòng thử lại sau.');\r\n//             } else {\r\n//                 console.error('Lỗi khi gửi yêu cầu:', error.message);\r\n//                 alert('Đã xảy ra lỗi khi thêm sản phẩm. Vui lòng thử lại.');\r\n//             }\r\n//         }\r\n//     };\r\n\r\n\r\n//     return (\r\n//         <div className=\"product-form\">\r\n//             <form className=\"form-container\" onSubmit={handleSubmit}>\r\n//                 {/* Upload hình ảnh */}\r\n//                 <div className=\"form-group\">\r\n//                     <label className=\"form-label\">Hình ảnh sản phẩm</label>\r\n//                     <div className=\"image-upload-group\">\r\n//                         {Array(1).fill('').map((_, index) => (\r\n//                             <label key={index} htmlFor={`image${index}`}>\r\n//                                 <input\r\n//                                     accept=\"image/*\"\r\n//                                     type=\"file\"\r\n//                                     id={`image${index}`}\r\n//                                     name=\"images\"\r\n//                                     hidden\r\n//                                     onChange={(e) => handleImageChange(e, index)}\r\n//                                 />\r\n//                                 <img\r\n//                                     className=\"upload-preview\"\r\n//                                     src={\r\n//                                         images[index]\r\n//                                             ? URL.createObjectURL(images[index])\r\n//                                             : \"https://raw.githubusercontent.com/prebuiltui/prebuiltui/main/assets/e-commerce/uploadArea.png\"\r\n//                                     }\r\n//                                     alt=\"upload\"\r\n//                                 />\r\n//                             </label>\r\n//                         ))}\r\n//                     </div>\r\n//                 </div>\r\n\r\n//                 {/* Tên sản phẩm */}\r\n//                 <div className=\"form-group\">\r\n//                     <label htmlFor=\"name\" className=\"form-label\">Tên sản phẩm</label>\r\n//                     <input id=\"name\" type=\"text\" className=\"form-input\" placeholder=\"Nhập vào đây\" required onChange={handleInputChange} />\r\n//                 </div>\r\n\r\n//                 {/* Mô tả */}\r\n//                 <div className=\"form-group\">\r\n//                     <label htmlFor=\"description\" className=\"form-label\">Mô tả sản phẩm</label>\r\n//                     <textarea id=\"description\" className=\"form-input\" rows=\"4\" placeholder=\"Nhập vào đây\" onChange={handleInputChange}></textarea>\r\n//                 </div>\r\n\r\n//                 {/* Danh mục và trạng thái */}\r\n//                 <div className=\"form-group\">\r\n//                     <label htmlFor=\"category\" className=\"form-label\">Danh mục</label>\r\n//                     <select id=\"category\" className=\"form-input\" onChange={handleInputChange}>\r\n//                         <option value=\"\">Chọn danh mục</option>\r\n//                         {categories.map(cat => (\r\n//                             <option key={cat._id} value={cat._id}>{cat.name}</option>\r\n//                         ))}\r\n//                     </select>\r\n\r\n//                     <label htmlFor=\"status\" className=\"form-label\">Trạng thái</label>\r\n//                     <select id=\"status\" className=\"form-input\" onChange={handleInputChange}>\r\n//                         <option value=\"in_stock\">Còn hàng</option>\r\n//                         <option value=\"out_of_stock\">Hết hàng</option>\r\n//                     </select>\r\n//                 </div>\r\n\r\n//                 {/* Giá và số lượng */}\r\n//                 <div className=\"form-row\">\r\n//                     <div className=\"form-group small\">\r\n//                         <label htmlFor=\"price\" className=\"form-label\">Giá sản phẩm</label>\r\n//                         <input id=\"price\" type=\"number\" className=\"form-input\" placeholder=\"0\" required onChange={handleInputChange} />\r\n//                     </div>\r\n//                     <div className=\"form-group small\">\r\n//                         <label htmlFor=\"quantity\" className=\"form-label\">Số lượng</label>\r\n//                         <input id=\"quantity\" type=\"number\" className=\"form-input\" placeholder=\"0\" required onChange={handleInputChange} />\r\n//                     </div>\r\n//                 </div>\r\n\r\n//                 <button type=\"submit\" className=\"submit-btn\">ADD</button>\r\n\r\n//             </form>\r\n//         </div>\r\n//     );\r\n// };\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}